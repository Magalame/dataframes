version: 2
jobs:
  macos-build:
    macos:
      xcode: "9.4.1"
    steps:
      # - restore_cache:
      #     keys:
      #       - source-v4
      - run:
          name: Install C++ dependencies
          command: brew install fmt cmake apache-arrow boost rapidjson howard-hinnant-date pybind11
      - run:
          name: Install Python dependencies
          command: pip3 install numpy seaborn sklearn
      - checkout
      - run:
          name: Configure Dataframes CMake
          command: |
            mkdir build
            cd build
            cmake -DCMAKE_BUILD_TYPE=RelWithDebInfo ../native_libs/src
      - run:
          name: Build Dataframes C++ parts on macos
          command: |
            cd build
            make -j 2



workflows:
  version: 2
  build_and_test:
    jobs:
      - macos-build